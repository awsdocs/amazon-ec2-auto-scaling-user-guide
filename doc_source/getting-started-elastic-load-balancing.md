# Prerequisites for getting started with Elastic Load Balancing<a name="getting-started-elastic-load-balancing"></a>

You must complete the prerequisites before you can attach a load balancer to your Auto Scaling group\. This includes creating the load balancer and the target group that is used to route traffic to your Auto Scaling group\.

You can either create the load balancer before creating the Auto Scaling group or during Auto Scaling group creation\.
+ Follow the procedures in the Elastic Load Balancing documentation to create the load balancer before creating the Auto Scaling group\. Skip the step for registering your Amazon EC2 instances\. Amazon EC2 Auto Scaling automatically takes care of registering \(and deregistering\) instances\. For more information, see [Getting started with Elastic Load Balancing](https://docs.aws.amazon.com/elasticloadbalancing/latest/userguide/load-balancer-getting-started.html) in the *Elastic Load Balancing User Guide*\. 
+ Alternatively, you can create and attach an Application Load Balancer or Network Load Balancer with a basic configuration from the Amazon EC2 Auto Scaling console\. For more information, see [Configure an Application Load Balancer or Network Load Balancer from the Amazon EC2 Auto Scaling console](as-create-load-balancer-console.md)\. 

To attach a load balancer to your Auto Scaling group, first make sure you have met these prerequisites:
+ The load balancer and its target group must be in the same AWS account, VPC, and Region as your Auto Scaling group\.
+ The target group must specify a target type of `instance`\. You can't specify a target type of `ip` when using an Auto Scaling group\.
+ If your launch template does not contain a security group that allows traffic from the load balancer to reach your Auto Scaling group, you must update the launch template\. The recommended rules depend on the type of load balancer and the types of backends that the load balancer uses\. For example, to route traffic to web servers, allow inbound HTTP access on port 80 from the load balancer\. 
**Note**  
Existing instances are not updated with the new settings when the launch template is modified\. To update existing instances, you can terminate existing instances in the Auto Scaling group\. Amazon EC2 Auto Scaling immediately starts launching new instances to replace the instances that you terminated\. Alternatively, you can start an instance refresh to replace the instances\. For more information, see [Replace Auto Scaling instances based on an instance refresh](asg-instance-refresh.md)\.
+ When deploying virtual appliances behind a Gateway Load Balancer, the Amazon Machine Image \(AMI\) must specify the ID of an AMI that supports the GENEVE protocol to allow the Auto Scaling group to exchange traffic with a Gateway Load Balancer\. Also, the security groups that you specify in the launch template or launch configuration must allow UDP traffic on port 6081\.

Before allowing your Auto Scaling group to use the results of the Elastic Load Balancing health checks to determine an instance's health, make sure you have met this additional prerequisite:
+ The security groups that you specify in the launch template must allow access from the load balancer on the correct port for Elastic Load Balancing to perform its health checks\. For more information, see [Add Elastic Load Balancing health checks to an Auto Scaling group](as-add-elb-healthcheck.md)\.

**Tip**  
If you have bootstrapping scripts that take a while to complete, you can optionally add a launch lifecycle hook to your Auto Scaling group to delay instances from registering behind the load balancer before your bootstrap scripts have completed successfully and the applications on the instances are ready to accept traffic\. You can't add a lifecycle hook when you initially create an Auto Scaling group in the Amazon EC2 Auto Scaling console\. You can add a lifecycle hook after creating the group\. For more information, see [Amazon EC2 Auto Scaling lifecycle hooks](lifecycle-hooks.md)\. 